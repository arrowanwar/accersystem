<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Entry Forms</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
</head>
<body class="bg-light">

<div class="container my-5">
  <h2 class="mb-4">Entry Forms</h2>

  <!-- Officer Form -->
  <div class="card mb-4">
    <div class="card-header">Add Officer</div>
    <div class="card-body">
      <form id="officerForm">
        <div class="mb-3">
          <label class="form-label">Name</label>
          <input type="text" class="form-control" name="name" required>
        </div>
        <div class="mb-3">
          <label class="form-label">Joint Current Office Date</label>
          <input type="date" class="form-control" name="joint_current_office_date">
        </div>
        <button type="submit" class="btn btn-primary">Save Officer</button>
      </form>
    </div>
  </div>

  <!-- HQ ER Form -->
  <div class="card mb-4">
    <div class="card-header">Add HQ ER</div>
    <div class="card-body">
      <form id="hqerForm">
        <div class="mb-3">
          <label class="form-label">HQ ER No</label>
          <input type="text" class="form-control" name="hq_er_no" required>
        </div>
        <div class="mb-3">
          <label class="form-label">Date</label>
          <input type="date" class="form-control" name="date" required>
        </div>
        <div class="mb-3">
          <label class="form-label">Section</label>
          <select class="form-select" name="section" required>
            <option value="">Select</option>
            <option value="1">Section 1</option>
            <option value="2">Section 2</option>
          </select>
        </div>
        <div class="mb-3">
          <label class="form-label">Nothi No</label>
          <input type="text" class="form-control" name="nothi_no">
        </div>
        <button type="submit" class="btn btn-success">Save HQ ER</button>
      </form>
    </div>
  </div>

  <!-- Accused Service Form -->
  <div class="card mb-4">
    <div class="card-header">Accused Service Info</div>
    <div class="card-body">
      <form id="accusedServiceForm">
        <div class="mb-3">
          <label class="form-label">Name</label>
          <input type="text" class="form-control" name="name" required>
        </div>
        <div class="mb-3">
          <label class="form-label">Post</label>
          <input type="text" class="form-control" name="post">
        </div>
        <div class="mb-3">
          <label class="form-label">Office Full Name</label>
          <input type="text" class="form-control" name="office_full_name">
        </div>
        <div class="mb-3">
          <label class="form-label">Office Short Name</label>
          <input type="text" class="form-control" name="office_short_name">
        </div>
        <div class="mb-3">
          <label class="form-label">Thana</label>
          <input type="text" class="form-control" name="thana">
        </div>
        <div class="mb-3">
          <label class="form-label">District</label>
          <input type="text" class="form-control" name="district">
        </div>
        <button type="submit" class="btn btn-warning">Save Service</button>
      </form>
    </div>
  </div>

  <!-- Accused Present Address -->
  <div class="card mb-4">
    <div class="card-header">Accused Present Address</div>
    <div class="card-body">
      <form id="accusedPresentForm">
        <div class="mb-3">
          <label class="form-label">Address Text</label>
          <textarea class="form-control" name="text"></textarea>
        </div>
        <div class="mb-3">
          <label class="form-label">Thana</label>
          <input type="text" class="form-control" name="thana">
        </div>
        <div class="mb-3">
          <label class="form-label">District</label>
          <input type="text" class="form-control" name="district">
        </div>
        <button type="submit" class="btn btn-info">Save Present Address</button>
      </form>
    </div>
  </div>

  <!-- Accused Permanent Address -->
  <div class="card mb-4">
    <div class="card-header">Accused Permanent Address</div>
    <div class="card-body">
      <form id="accusedPermanentForm">
        <div class="mb-3">
          <label class="form-label">Address Text</label>
          <textarea class="form-control" name="text"></textarea>
        </div>
        <div class="mb-3">
          <label class="form-label">Thana</label>
          <input type="text" class="form-control" name="thana">
        </div>
        <div class="mb-3">
          <label class="form-label">District</label>
          <input type="text" class="form-control" name="district">
        </div>
        <button type="submit" class="btn btn-dark">Save Permanent Address</button>
      </form>
    </div>
  </div>

</div>

<script>
  const apiBase = "http://127.0.0.1:8000/api"; // adjust if needed

  function handleSubmit(formId, endpoint) {
    document.getElementById(formId).addEventListener("submit", async (e) => {
      e.preventDefault();
      const form = e.target;
      const data = Object.fromEntries(new FormData(form).entries());
      try {
        let res = await axios.post(`${apiBase}${endpoint}`, data);
        alert("Saved successfully!");
        form.reset();
        console.log(res.data);
      } catch (err) {
        console.error(err.response?.data || err.message);
        alert("Error occurred, check console.");
      }
    });
  }

  handleSubmit("officerForm", "/officers");
  handleSubmit("hqerForm", "/hq-ers");
  handleSubmit("accusedServiceForm", "/accused/service");
  handleSubmit("accusedPresentForm", "/accused/present");
  handleSubmit("accusedPermanentForm", "/accused/permanent");
</script>

</body>
</html>
